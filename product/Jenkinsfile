pipeline {
  agent any
  stages {
    stage('Build & Test') {
      steps {
        sh '''cd product
              docker-compose up -d --build
                docker exec backend bash -c "pytest tests/ --cov application"
                docker exec frontend bash -c "pytest tests/ --cov application"
                docker-compose down
'''
      }
    }

  }
}